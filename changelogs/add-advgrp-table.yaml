databaseChangeLog:
  - changeSet:
      id: 3
      author: kacper
      changes:
        - createTable:
            tableName: advgrp
            columns:
              - column:
                  name: id
                  type: INT
                  constraints:
                    primaryKey: true
                    nullable: false
                  comment: "ID, PK w tej tabeli, wrzucony index"
              - column:
                  name: advgshort
                  type: varchar(8)
                  constraints:
                    nullable: false
                  comment: "Skrócona nazwa grupy np. początkujący - POCZ"
              - column:
                  name: advgname
                  type: varchar(30)
                  constraints:
                    nullable: false
                  comment: "Pełna nazwa grupy"
              - column:
                  name: status
                  type: char(1)
                  constraints:
                    nullable: false
                  comment: "Status grupy. Używany do określania i łatwiejszego wyszukiwania. Przykładowe statusy I - inactive, A - active, D - deleted"
              - column:
                  name: updstmp
                  type: date
                  constraints:
                    nullable: false
                  comment: "Data kiedy był zrobiony ostatni update na tym wierszu. Wrzucony trigger trg_update_updstmp_advgrp"
              - column:
                  name: insstmp
                  type: date
                  constraints:
                    nullable: false
                  comment: "Data kiedy powstał wpis. Wrzucony trigger trg_insert_insstmp_advgrp"
              - column:
                  name: addtxt1
                  type: varchar(35)
                  constraints:
                    nullable: true
                  comment: "Kolumna rozwojowa, obecnie pusta"

  - changeSet:
      id: 4
      author: kacper
      changes:
        - sql:
            comment: "Trigger aktualizujący kolumnę updstmp przy aktualizacji"
            sql: |
              CREATE OR REPLACE TRIGGER trg_update_updstmp_advgrp
              BEFORE UPDATE ON advgrp
              FOR EACH ROW
              EXECUTE FUNCTION update_updstmp();

  - changeSet:
      id: 5
      author: kacper
      changes:
        - sql:
            comment: "Trigger ustawiający kolumnę insstmp przy wstawieniu nowego wiersza"
            sql: |
              CREATE OR REPLACE TRIGGER trg_insert_insstmp_advgrp
              BEFORE INSERT ON advgrp
              FOR EACH ROW
              EXECUTE FUNCTION insert_insstmp();
			  
  - changeSet:
      id: 6
      author: kacper
      changes:
        - createIndex:
            indexName: advgrp_k1
            tableName: advgrp
            unique: true
            columns:
              - column:
                  name: id
